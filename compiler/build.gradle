apply plugin: 'java'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

task localRun(type: JavaExec) {
    classpath sourceSets.main.runtimeClasspath
    main = "com.gabrielittner.threetenbp.LazyZoneRulesCompiler"
    def version = project.hasProperty("tzdbversion") ? project.property("tzdbversion") : ""
    def srcdir = project.hasProperty("srcdir") ? project.property("srcdir") : ""
    def runtimeDir = rootProject.project("runtime").projectDir
    args "--version", "$version", "--srcdir", "$srcdir", "--codeoutdir", "$runtimeDir/src/main/java", "--tzdboutdir", "$runtimeDir/src/main/assets"
}

dependencies {
    compile deps.threetenbp
    compile deps.javapoet
    compile deps.google_options

    testCompile deps.junit
    testCompile deps.truth
    testCompile deps.compile_testing
    testCompile files(org.gradle.internal.jvm.Jvm.current().getToolsJar())
}

apply from: rootProject.file('gradle/mvn-push.gradle')
